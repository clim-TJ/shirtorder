<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="conradlim">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/conradp04/tj-shirt-project/master/TJ-site/tjfav.png">
    <title> TJ's Shirt Cart </title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link href="css/modern-business.css" rel="stylesheet">

    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="css/reg-main.css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        #deleteItem {
            background-color: #cbc9c9;
            color: whitesmoke;
        }

            #deleteItem:hover {
                background-color: darkred;
                color: white;
            }
    </style>
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <img src="photos/tj_logo_b.png">
                </div>
            </div>
            <div id="countDiv" style="margin-left:950px;margin-top:15px;">
                <a href="mainindex.html" style="font-size:15px;font-weight:bold;font-family:'Roboto';margin-right:5px;color:#353333">Home</a>
                <label style="font-weight:bold;font-size:15px;margin-left:20px" class="glyphicon glyphicon-shopping-cart"></label>&nbsp;
                <a href="tj_ShoppingCart.html">
                    <span id="countContainer" style="margin-left:-6px;padding:3px 3px;background-color:darkred;border:1px solid darkred;border-radius:25px;">
                        <span id="showCount" style="color:#fff;font-weight:bold;margin:3px 5px; "></span>
                    </span>
                </a>
            </div>

        </div>
    </nav>
    <div style="margin-top:50px">
        <h1>Shopping Cart</h1>
    </div>
    <form action="https://formspree.io/conradlimphoto@gmail.com" method="POST">
        <input id="form-subject" name="_subject" value="New Hawaiian Shirt Order" type="hidden">
        <input name="_next" value="http://conradp04.github.io/tj-shirt-project/TJ-site/test-contact.html" type="hidden">

        <div id="tblDiv" style="display:block;margin-top:10px;">
        </div>

        <h3 style="margin-top:50px;text-align:center;margin-left:-745px">Alternative Choices</h3>
        <div id="tblAlternateDiv" style="display:block;margin-top:10px;">
        </div>

        <div style="text-align:center;">
            <h3>Name:</h3>
            <input id="form-name" name="Name:">
            <h3>Email:</h3>
            <input id="form-email" name="_replyto" type="email">

            <h3>Specify WCO or ECO:</h3>
            <select id="form-office" name="Company Name">
                <option>--</option>
                <option name="WCO">West Coast Office</option>
                <option name="ECO">East Coast Office</option>
            </select>
        </div>
        <div id="btnDiv" style="margin:15px auto;text-align:center">

            <button id="btnClear" type="button" onclick="clearCart()" style="margin:30px auto 15px auto;">CLEAR CART</button> &nbsp;
            <button id="btnSubmit" type="submit" value="send" style="margin:30px auto 15px auto;">SUBMIT ORDER</button>

        </div>

        <div id="orderForm" style="display:block;margin-top:10px">

        </div>

    </form>

    <div id="messageDiv" style="display:block;margin:75px auto;width:25%">
        <span id="cartMessages" style="text-align:center;display:block;font-family:roboto;font-size:26px;color:darkred"></span>
    </div>
    <button id="btnAlternate" class="btn" style="float:right;margin:30px auto 15px auto;visibility:hidden" disabled></button>
    <button id="btnAdd" class="btn" style="float:right;margin:30px auto 15px auto;visibility:hidden" disabled></button>

    <script src="js/jquery.js"></script>
    <script src="js/contactform.js"></script>
    <script type="text/javascript">




        function loadCart() {
            shirtCart = JSON.parse(localStorage.getItem("CartItems"))
        }


        function showCartitems() {
            shirtCart = JSON.parse(localStorage.getItem("CartItems"))
            alternateCart = JSON.parse(localStorage.getItem("AlternateItems"))


            count = 1
            var tableDiv = document.getElementById("tblDiv")
            //var tableOne = document.createElement("TABLE")
          //  var tableBody = document.createElement('TBODY')
            var header = new Array()
            header[0] = ""
            header[1] = "STYLE"
            header[2] = "COLOR"
            header[3] = "SIZE"
            header[4] = "TYPE"
            header[5] = "M/W"
            header[6] = "QUANTITY"
        //    tableOne.appendChild(tableBody)

            var html = "<table id='itemsInCart' style='border:1px solid gray;border-collapse:collapse;text-align:center'>";
            var insertString = ""

            for (var i = 0; i < header.length; i++) {
                html += "<th style='padding:10px 50px'>"
                html += header[i] + "</th>"

            }
            for (var i = 0; i < shirtCart.length; i++) {
                html += "<tr>";
                html += "<td>" + "<button id='deleteItem' class='glyphicon glyphicon-remove' style='border-radius:5px;border:1px solid #f5f5f5;' onclick='return removeItem(this);false' name='Shirt Order: ' value='" + shirtCart[i].id + "-" + shirtCart[i].name + " - " + shirtCart[i].color + " - " + shirtCart[i].size + " - " + shirtCart[i].type + " - " + shirtCart[i].gender + " - " + shirtCart[i].count + "' data-id='" + shirtCart[i].id + "' data-color='" + shirtCart[i].color + "'></button></td>";
                html += "<td>" + shirtCart[i].id + " - " + shirtCart[i].name + "</td>";
                html += "<td>" + shirtCart[i].color + "</td>";
                html += "<td>" + shirtCart[i].size + "</td>";
                html += "<td>" + shirtCart[i].type + "</td>";
                html += "<td>" + shirtCart[i].gender + "</td>"
                html += "<td>" + shirtCart[i].count + "</td>";

                html += "</tr>";

            }
            html += ""
            html += "</table>";
            tableDiv.innerHTML = html;

            if (alternateCart.length >= 0) {
                var tableDivTwo = document.getElementById("tblAlternateDiv")
                var tableTwo = document.createElement("TABLE")
                var tableBodyTwo = document.createElement('TBODY')
                tableTwo.appendChild(tableBodyTwo)
                var html = "<table id='itemsInCartTwo' style='border:1px solid gray;border-collapse:collapse;text-align:center'>";

                for (var i = 0; i < header.length; i++) {
                    html += "<th style='padding:10px 50px'>"
                    html += header[i] + "</th>"
                }
                for (var i = 0; i < alternateCart.length; i++) {
                    html += "<tr>";
                    html += "<td>" + "<button id='deleteItem' class='glyphicon glyphicon-remove' style='border-radius:5px;border:1px solid #f5f5f5;' href='#' onclick='return removeAlternateItem(this);' data-id='" + alternateCart[i].id + "' data-color='" + alternateCart[i].color + "'></button></td>";
                    html += "<td>A" + alternateCart[i].id + "-" + alternateCart[i].name + "</td>";
                    html += "<td>" + alternateCart[i].color + "</td>";
                    html += "<td>" + alternateCart[i].size + "</td>";
                    html += "<td>" + alternateCart[i].type + "</td>";
                    html += "<td>" + alternateCart[i].gender + "</td>"
                    html += "<td>" + alternateCart[i].count + "</td>";
                    html += "</tr>";
                }
                html += ""
                html += "</table>";
                tableDivTwo.innerHTML = html;
            } else {
                tableDivTwo.innerHTML = "nothing"
            }


        }


        showCartitems()


        $.ajax({
            url: "https://formspree.io/conradlimphoto@gmail.com",
            method: "POST",
            data: {
                Name: document.getElementById('form-name').value,
                Office: document.getElementById('form-office').value,
                Email: document.getElementById('form-email').value,
                Cart: document.getElementById('tblDiv').value,
                message: "hello!"
            },
            //data: { },
            dataType: "json"
        });
    </script>
</body>
</html>